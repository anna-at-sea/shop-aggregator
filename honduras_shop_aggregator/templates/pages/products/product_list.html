{% extends 'layouts/base.html' %}
{% load i18n %}
{% load crispy_forms_tags %}
{% load static %}

{% block title %}{% translate "Catalogue" %} | Cangrejal{% endblock %}
{% block content %}
{% include "partials/flash_message.html" %}

<div class="container mt-4">
    <h1 class="text-dark mb-4">{% translate "All Products in" %} {{ current_city.name }}</h1>

    <div class="row">
        <div class="col-12 col-md-3">
            <div class="filter-sidebar">
                <form method="get" class="card">
                    <div class="card-body bg-light">
                        {{ filter.form|crispy }}
                        <button type="submit" class="btn btn-danger btn-sm">{% translate "Show" %}</button>
                    </div>
                </form>
            </div>
        </div>

        <div id="product-list" class="col-12 col-md-9">
            {% include "partials/_product_grid.html" %}
        </div>
    </div>

{% if page_obj.has_next %}
    <div class="text-center my-4">
        <button id="load-more-btn" class="btn btn-outline-danger btn-lg px-5" data-next-page="{{ page_obj.next_page_number }}">
            {% translate "Load More" %}
        </button>
    </div>
{% endif %}

</div>

{% include "partials/_product_list_scripts.html" %}

{% endblock %}
